<!DOCTYPE html>
<html>
  <head>
  <title>Redshift Configuration</title>
    <meta name=viewport content="width=device-width, initial-scale=1" />
    <link rel='stylesheet' type='text/css' href='../../config/css/slate.min.css'>
    <link rel='stylesheet' type='text/css' href='../../config/css/fonts.css'>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:700" rel="stylesheet">
    <script src='../../config/js/slate.js'></script>
    <script src='../../config/js/gcolor.js'></script>
    <script src='../../config/js/pebble.js'></script>
    <script src='../../config/js/preview.js'></script>
    <script src='../../config/js/strftime.js'></script>
    <script src='../../config/js/sprintf.min.js'></script>
    <script src="../../config/js/spark-md5.min.js"></script>
    <style>
    canvas.preview {
      margin: 10px;
    }
    #data {
      display: none;
    }
    </style>
    <meta charset="utf-8"/>
  </head>

  <body>
    
  <div id="previews"></div>

    <div id="data">
    </div>

  <script>
  $(document).ready(function() {
    var config = RedshiftPreview.defaultConfig();
    var screenshots = [
      {
        id: "redshift-1",
      },
      {
        id: "redshift-2",
      },
    ];

    for (var i in screenshots) {
      var key = "preview-" + screenshots[i].id;
      $("#previews").append("<canvas class='preview' id=\"" + key + "\"></canvas>");
      RedshiftPreview.drawPreview(config, key, "basalt");
    }

    // schedule capturing the preview
    var capture = function () {

      var s = ""
      for (var i in screenshots) {
        var id = screenshots[i].id;
        var key = "preview-" + id;
        var img    = $("#" + key).get(0).toDataURL("image/png");
        s += id + "::::" + img.substr(22) + "\n";
      }

      $("#data").html(s);

      var timeout = 500;
      setTimeout(function () {
        capture();
      }, timeout);
    };
    capture();
  });
  </script>
  </body>
</html>
